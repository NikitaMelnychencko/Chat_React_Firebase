(this.webpackJsonpchat_react_firebase=this.webpackJsonpchat_react_firebase||[]).push([[0],{109:function(e,t,n){},111:function(e,t,n){"use strict";n.r(t);var a=n(2),s=n.n(a),r=n(30),c=n.n(r),o=n(4),i=n(6),l=n(10),u=n(11),h=n(71),b=n.n(h),d=n(7),m=function(e){var t=e.children;return Object(d.jsx)("main",{children:Object(d.jsx)("section",{className:b.a.Section,children:Object(d.jsx)("div",{className:b.a.Container,children:t})})})},j=n(47),p=n.n(j),g=n(31),O=n(82),f=n(26),x=(Object(O.a)({apiKey:"AIzaSyB2GhFkUipTzzgiF4QxbwvvRTipNdBzZQk",authDomain:"chat-react-firebase-nande.firebaseapp.com",databaseURL:"https://chat-react-firebase-nande-default-rtdb.europe-west1.firebasedatabase.app",projectId:"chat-react-firebase-nande",storageBucket:"chat-react-firebase-nande.appspot.com",messagingSenderId:"733483402422",appId:"1:733483402422:web:b46958be6ebde37b181217"}),Object(f.a)()),_=(Object(f.d)(Object(f.a)()),Object(g.b)()),v=(_.currentUser,sessionStorage.getItem("userId"),function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(o.a)(this,n);for(var a=arguments.length,s=new Array(a),r=0;r<a;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).LogOut=function(){return Object(g.e)(_).then((function(){sessionStorage.removeItem("userId"),e.props.onlineCheck()}))},e}return Object(i.a)(n,[{key:"render",value:function(){var e=this.props.online?"online":"offline";return Object(d.jsx)("header",{className:p.a.header,children:Object(d.jsxs)("div",{className:p.a.container,children:[Object(d.jsx)("div",{className:p.a[e]}),Object(d.jsx)("div",{children:this.props.online?Object(d.jsx)("button",{type:"s.button",className:p.a.button,onClick:this.LogOut,children:"LogOut"}):Object(d.jsx)("button",{type:"s.button",className:p.a.button,onClick:this.props.onClick,children:"LogIn"})})]})})}}]),n}(a.PureComponent)),y=v,C=n(72),k=n.n(C),N=function(e){var t=e.children;return Object(d.jsx)("footer",{children:Object(d.jsx)("section",{className:k.a.Section,children:Object(d.jsx)("div",{className:k.a.Container,children:t})})})},S=n(61),I=n.n(S),w=document.querySelector("#modal-root"),M=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(o.a)(this,n);for(var a=arguments.length,s=new Array(a),r=0;r<a;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).handleKeyDown=function(t){"Escape"===t.code&&e.props.onClose()},e.handleBackdropClick=function(t){t.currentTarget===t.target&&e.props.onClose()},e}return Object(i.a)(n,[{key:"componentDidMount",value:function(){window.addEventListener("keydown",this.handleKeyDown)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("keydown",this.handleKeyDown)}},{key:"render",value:function(){return Object(r.createPortal)(Object(d.jsx)("div",{className:I.a.overlay,onClick:this.handleBackdropClick,children:Object(d.jsxs)("div",{className:I.a.modal,children:[Object(d.jsx)(d.Fragment,{children:this.props.children}),Object(d.jsx)("button",{type:"button",className:I.a.closebtn,onClick:this.props.onClose})]})}),w)}}]),n}(a.PureComponent),U=M,F=n(67),L=n(0),P=n.n(L),T=n(5);function A(e,t){return B.apply(this,arguments)}function B(){return(B=Object(T.a)(P.a.mark((function e(t,n){var a,s;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==t){e.next=2;break}return e.abrupt("return");case 2:return a=Object(f.d)(x,"message"),s=Object(f.c)(a),console.log(s.key),n.key=s.key,e.next=8,Object(f.g)(s,{message:n});case 8:return e.abrupt("return",e.sent);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function D(){return(D=Object(T.a)(P.a.mark((function e(t){return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(f.e)(Object(f.d)(x,"message/"+t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var H=n(62),K=n.n(H),E=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(o.a)(this,n);for(var a=arguments.length,s=new Array(a),r=0;r<a;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).state={message:""},e.handleNameChange=function(t){e.setState({message:t.currentTarget.value.toLowerCase()})},e.handleSubmit=function(t){if(t.preventDefault(),""!==e.state.message.trim()){var n={text:e.state.message,userId:sessionStorage.getItem("userId"),userName:sessionStorage.getItem("userName"),time:Object(f.f)()};A(sessionStorage.getItem("userId"),n),e.setState({message:""})}else F.a.warn("Input message!")},e}return Object(i.a)(n,[{key:"render",value:function(){return Object(d.jsxs)("form",{className:K.a.Form,onSubmit:this.handleSubmit,children:[Object(d.jsx)("textarea",{type:"text",autoComplete:"off",autoFocus:!0,className:K.a.Input,value:this.state.message,onChange:this.handleNameChange}),Object(d.jsxs)("button",{type:"submit",className:K.a.Button,children:[" ","Send"]})]})}}]),n}(a.PureComponent),q=E,z=n(3),J=n(49),R=n.n(J),Q=function(e){var t=e.email,n=e.pass,a=e.onChange;return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsxs)("label",{className:"",children:[Object(d.jsx)("span",{className:"",children:"Email"}),Object(d.jsx)("input",{type:"email",name:"email",className:"",title:"***@mail.com",pattern:"[^@\\s]+@[^@\\s]+\\.[^@\\s]+",required:!0,value:t,onChange:a})]}),Object(d.jsxs)("label",{className:"",children:[Object(d.jsx)("span",{className:"",children:"Password"}),Object(d.jsx)("input",{type:"password",name:"pass",className:"",required:!0,minLength:"5",value:n,onChange:a})]})]})},W=function(e){var t=e.name,n=e.email,a=e.pass,s=e.onChange;return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsxs)("label",{className:"",children:[Object(d.jsx)("span",{className:"",children:"Name"}),Object(d.jsx)("input",{type:"text",name:"name",id:"singup-name",required:!0,className:"",value:t,onChange:s})]}),Object(d.jsxs)("label",{className:"",children:[Object(d.jsx)("span",{className:"",children:"Email"}),Object(d.jsx)("input",{type:"email",name:"email",className:"",title:"***@mail.com",pattern:"[^@\\s]+@[^@\\s]+\\.[^@\\s]+",required:!0,value:n,onChange:s})]}),Object(d.jsxs)("label",{className:"",children:[Object(d.jsx)("span",{className:"",children:"Password"}),Object(d.jsx)("input",{type:"password",name:"pass",className:"",required:!0,minLength:"5",value:a,onChange:s})]})]})},G=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(o.a)(this,n);for(var a=arguments.length,s=new Array(a),r=0;r<a;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).state={name:"",email:"",pass:"",sigin:!0},e.changeModal=function(){e.setState((function(e){return{sigin:!e.sigin}}))},e.handleChange=function(t){var n=t.currentTarget,a=n.name,s=n.value;e.setState(Object(z.a)({},a,s))},e.handleSubmit=function(t){t.preventDefault();var n=e.state.email,a=e.state.pass;e.props.onClose(),e.state.sigin?e.signInUser(n,a):e.regUser(n,a)},e}return Object(i.a)(n,[{key:"regUser",value:function(e,t){var n=this;return Object(g.a)(_,e,t).then((function(e){return n.props.onlineCheck(),n.updateInUser(n.state.name),e.user.uid})).catch((function(e){e.message}))}},{key:"signInUser",value:function(e,t){var n=this;return console.log(e),Object(g.d)(_,e,t).then((function(e){return n.props.onlineCheck(),e.user})).catch((function(e){e.message}))}},{key:"updateInUser",value:function(e){return Object(g.f)(_.currentUser,{displayName:"".concat(e)})}},{key:"render",value:function(){return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsxs)("form",{className:R.a.content,action:"registration",onSubmit:this.handleSubmit,children:[Object(d.jsx)("div",{children:this.state.sigin?Object(d.jsx)(Q,{email:this.state.email,pass:this.state.pass,onChange:this.handleChange}):Object(d.jsx)(W,{name:this.state.name,email:this.state.email,pass:this.state.pass,onChange:this.handleChange})}),Object(d.jsx)("button",{type:"submit",className:"","aria-label":"submit-form",children:this.state.sigin?"Sign In":"Sign Up"})]}),Object(d.jsx)("button",{type:"button",className:R.a.switchbtn,onClick:this.changeModal,children:this.state.sigin?"Sign Up":"Sign In"})]})}}]),n}(a.PureComponent),V=G,X=n(15),Y=n(41),Z=n.n(Y),$=n(147),ee=n(143),te=n(145),ne=n(84),ae=n.n(ne),se=function(e){var t=e.message,n=Object(a.useState)(null),s=Object(X.a)(n,2),r=s[0],c=s[1],o=Boolean(r),i=function(e){c(null),"delete message"===e.currentTarget.outerText&&function(e){D.apply(this,arguments)}(e.currentTarget.dataset.key)},l=new Date(t.time),u=null,h="red";return sessionStorage.getItem("userName")===t.userName&&(u="auto",h="blue"),Object(d.jsxs)("li",{className:Z.a.Item,style:{marginLeft:u},children:[Object(d.jsxs)("div",{className:Z.a.Menu,children:[Object(d.jsx)($.a,{"aria-label":"more",id:"long-button","aria-controls":o?"long-menu":void 0,"aria-expanded":o?"true":void 0,"aria-haspopup":"true",size:"small",color:"secondary",onClick:function(e){c(e.currentTarget)},children:Object(d.jsx)(ae.a,{})}),Object(d.jsx)(ee.a,{id:"long-menu",MenuListProps:{"aria-labelledby":"long-button"},anchorEl:r,open:o,onClose:i,PaperProps:{style:{maxHeight:216,width:"20ch"}},children:["delete message"].map((function(e){return Object(d.jsx)(te.a,{selected:"Pyxis"===e,onClick:i,"data-key":"".concat(t.key),children:e},e)}))})]}),Object(d.jsx)("h3",{className:Z.a.UserName,style:{background:h},children:t.userName}),Object(d.jsx)("p",{className:Z.a.UserMassage,children:t.text}),Object(d.jsxs)("p",{children:[l.toLocaleDateString()," ",l.toLocaleTimeString()]})]})},re=n(87),ce=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(o.a)(this,n);for(var a=arguments.length,s=new Array(a),r=0;r<a;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).state={message:[]},e}return Object(i.a)(n,[{key:"componentDidMount",value:function(){var e=this,t=Object(f.d)(x,"message");Object(f.b)(t,(function(t){var n=t.val(),a=[];for(var s in n)a.push(n[s].message);e.setState({message:a})}))}},{key:"render",value:function(){var e=this.state.message;return Object(d.jsx)("ul",{className:Z.a.MassageList,children:e.map((function(e){return Object(d.jsx)(se,{message:e},Object(re.a)())}))})}}]),n}(a.PureComponent),oe=ce,ie=n(64),le=n.n(ie),ue=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(o.a)(this,n);for(var a=arguments.length,s=new Array(a),r=0;r<a;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).signTestUser=function(){e.signInUser("testuser@gmail.com","1234509876")},e}return Object(i.a)(n,[{key:"signInUser",value:function(e,t){var n=this;return console.log(e),Object(g.d)(_,e,t).then((function(e){return n.props.onlineCheck(),e.user})).catch((function(e){e.message}))}},{key:"render",value:function(){return Object(d.jsxs)("div",{className:le.a.choose,children:[Object(d.jsx)("p",{children:"Please, choose variant"}),Object(d.jsx)("button",{type:"s.button",className:le.a.button,onClick:this.props.onClick,children:"LogIn"}),Object(d.jsx)("button",{type:"s.button",className:le.a.button,onClick:this.signTestUser,children:"Test User"})]})}}]),n}(a.PureComponent),he=ue,be=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(o.a)(this,n);for(var a=arguments.length,s=new Array(a),r=0;r<a;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).state={showModal:!1,message:null,online:null!==sessionStorage.getItem("userId")},e.toggleModal=function(){e.setState((function(e){return{showModal:!e.showModal}}))},e.handleFormSubmit=function(t){e.setState({message:t})},e.onlineCheck=function(){e.setState((function(e){e.online;return{online:null!==sessionStorage.getItem("userId")}}))},e}return Object(i.a)(n,[{key:"componentDidMount",value:function(){return Object(g.c)(_,(function(e){if(e){var t=e.uid;return sessionStorage.setItem("userName","".concat(e.displayName)),sessionStorage.setItem("userId","".concat(t))}}))}},{key:"render",value:function(){return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(y,{onClick:this.toggleModal,online:this.state.online,onlineCheck:this.onlineCheck}),Object(d.jsx)(m,{children:this.state.online?Object(d.jsx)(oe,{}):Object(d.jsx)(he,{onClick:this.toggleModal,onlineCheck:this.onlineCheck})}),Object(d.jsx)(N,{children:Object(d.jsx)(q,{onSubmit:this.handleFormSubmit})}),this.state.showModal&&Object(d.jsx)(U,{onClose:this.toggleModal,children:Object(d.jsx)(V,{onClose:this.toggleModal,onlineCheck:this.onlineCheck})})]})}}]),n}(a.PureComponent),de=be;n(109);c.a.render(Object(d.jsx)(s.a.StrictMode,{children:Object(d.jsx)(de,{})}),document.getElementById("root"))},41:function(e,t,n){e.exports={MassageList:"Massage_MassageList__1Mvgr",Item:"Massage_Item__2C3j3",UserName:"Massage_UserName__1uEPO",UserMassage:"Massage_UserMassage__1I3bp",Menu:"Massage_Menu__icYRz"}},47:function(e,t,n){e.exports={container:"Header_container__JsXgo",header:"Header_header__3olLd",icon:"Header_icon__3cK2I",online:"Header_online__oJ0uK Header_icon__3cK2I",offline:"Header_offline__1Ghwo Header_icon__3cK2I",button:"Header_button__14upi"}},49:function(e,t,n){e.exports={button:"AuthForm_button__2uPKq",switchbtn:"AuthForm_switchbtn__3YtJM AuthForm_button__2uPKq"}},61:function(e,t,n){e.exports={overlay:"Modal_overlay__2Lk91",modal:"Modal_modal__-b5Ee",button:"Modal_button__1dM4W",closebtn:"Modal_closebtn__37TpJ Modal_button__1dM4W"}},62:function(e,t,n){e.exports={Form:"SendBox_Form__39Nia",Input:"SendBox_Input__1DMAe",Button:"SendBox_Button__3ru7A"}},64:function(e,t,n){e.exports={choose:"UserTest_choose__1XT2v",button:"UserTest_button__IVIAd"}},71:function(e,t,n){e.exports={Section:"Main_Section__2y6yl",Container:"Main_Container__bHwsu"}},72:function(e,t,n){e.exports={Section:"Footer_Section__1NFnQ",Container:"Footer_Container__1V4RF"}}},[[111,1,2]]]);
//# sourceMappingURL=main.ca713255.chunk.js.map